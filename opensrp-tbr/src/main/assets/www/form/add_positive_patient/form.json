{"name":"positive_pt","type":"survey","instance":{"encounter_type":"positive TB patient"},"title":"Add Positive Patient","id_string":"uganda_positive_pt","sms_keyword":"uganda_positive_pt","default_language":"English","version":"201904230557","children":[
  {
    "instance": {
      "openmrs_entity_id": "birthdate",
      "openmrs_entity": "person"
    },
    "type": "calculate",
    "name": "birthdate",
    "bind": {
      "relevant": "${age}!=''",
      "calculate": "format-date(date((${today})-(${age}*365.25)),'%Y-%m-%d' )"
    }
  },
  {
    "default": "1",
    "instance": {
      "openmrs_entity_id": "birthdate_estimated",
      "openmrs_entity": "person"
    },
    "type": "hidden",
    "name": "birthdate_estimated",
    "bind": {
      "relevant": "${age}!=''"
    }
  },
  {"name":"provider_uc","type":"hidden"},{"name":"provider_town","type":"hidden"},{"name":"provider_city","type":"hidden"},{"name":"provider_province","type":"hidden"},{"name":"provider_id","type":"hidden"},{"name":"provider_location_id","type":"hidden","instance":{"openmrs_entity_id":"location_id","openmrs_entity":"encounter"}},{"name":"provider_location_name","type":"hidden"},{"name":"provider_location_note","label":{"English":"City: ${provider_city} ; Town: ${provider_town} ; UC: ${provider_uc} ; Center Name: ${provider_location_name}","Roman Urdu":"Shehr: ${provider_city} ; Town: ${provider_town} ; UC: ${provider_uc} ; Center ka naam: ${provider_location_name}"},"type":"note"},{"name":"start","type":"start","instance":{"openmrs_entity_id":"TBR:form start datetime","openmrs_entity":"concept"}},{"name":"end","type":"end","instance":{"openmrs_entity_id":"TBR:form end datetime","openmrs_entity":"concept"}},{"name":"today","type":"today","instance":{"openmrs_entity_id":"TBR:data enty datetime","openmrs_entity":"concept"}},{"name":"deviceid","type":"deviceid","instance":{"openmrs_entity_id":"TBR:device id","openmrs_entity":"concept"}},{"name":"subscriberid","type":"subscriberid","instance":{"openmrs_entity_id":"TBR:subscriber id","openmrs_entity":"concept"}},{"name":"simserial","type":"simserial","instance":{"openmrs_entity_id":"TBR:sim serial number","openmrs_entity":"concept"}},{"name":"phonenumber","type":"phonenumber","instance":{"openmrs_entity_id":"TBR:sim number","openmrs_entity":"concept"}},{"name":"client_reg_date","label":{"English":"Data Entry Date","Roman Urdu":"Indraj ki Tareekh"},"type":"calculate","bind":{"calculate":"${today}"},"instance":{"openmrs_entity_id":"encounter_date","openmrs_entity":"encounter"}},{"name":"diagnosis_type","label":{"English":"Has the patient been diagnosed bacteriologically or clinically","Roman Urdu":"Mareez ki tashkees kis bunyab pe howi?"},"type":"select one","instance":{"openmrs_entity_id":"TBR: tb diagnosis method","openmrs_entity":"concept"},"children":[{"name":"x_ray","label":{"English":"X-ray","Roman Urdu":"X-ray"},"instance":{"openmrs_code":"TBR: x-ray"}},{"name":"bacteriologically","label":{"English":"Bacteriologically","Roman Urdu":"Bacteriologically"},"instance":{"openmrs_code":"TBR: afb smear"}},{"name":"symptomatically","label":{"English":"Symptomatically","Roman Urdu":"Symptomatically"},"instance":{"openmrs_code":"TBR: clinical suspicion"}},{"name":"dont_know","label":{"English":"Don't Know","Roman Urdu":"Pata Nahi"},"instance":{"openmrs_code":"TBR: unknown"}},{"name":"other","label":{"English":"Other","Roman Urdu":"Koi aur"},"instance":{"openmrs_code":"TBR: other"}}]},{"name":"participant_id","label":{"English":"Participant ID","Roman Urdu":"ID"},"type":"text","bind":{"required":"yes","constraint":"regex(., '[A-Z0-9]{0,20}$')","jr:constraintMsg":{"English":"Maximum 20 digits and cannot contain anything other than number"}},"instance":{"openmrs_entity_id":"TBREACH ID","openmrs_entity":"person_identifier"}},{"name":"program_id","label":{"English":"Program ID","Roman Urdu":"Program ID"},"type":"text","instance":{"openmrs_entity_id":"TBREACH Program ID","openmrs_entity":"person_identifier"}},{"name":"first_name","label":{"English":"First Name","Roman Urdu":"Naam"},"type":"text","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"first_name","openmrs_entity":"person"}},{"name":"last_name","label":{"English":"Last Name","Roman Urdu":"Walid ya shohar ka naam"},"type":"text","instance":{"openmrs_entity_id":"last_name","openmrs_entity":"person"}},{"name":"national_id","label":{"English":"National Identification Number","Roman Urdu":"National Identification Number"},"type":"text","instance":{"openmrs_entity_id":"CNIC","openmrs_entity":"person_attribute"}},{"name":"age","label":{"English":"Current Age","Roman Urdu":"Umar"},"hint":{"English":"(years)"},"type":"integer","bind":{"required":"yes","constraint":". >0 and . <=150","jr:constraintMsg":{"English":"Must be at least a year old and less than 150 years of age"}},"instance":{"openmrs_entity_id":"age","openmrs_entity":"person"}},{"name":"gender","label":{"English":"Gender","Roman Urdu":"Jins"},"type":"select one","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"gender","openmrs_entity":"person"},"children":[{"name":"male","label":{"English":"Male","Roman Urdu":"Mard/larka"},"instance":{"openmrs_code":"TBR: male"}},{"name":"female","label":{"English":"Female","Roman Urdu":"Aurat/larki"},"instance":{"openmrs_code":"TBR: female"}},{"name":"transgender","label":{"English":"Transgender","Roman Urdu":"Khwaja sira"},"instance":{"openmrs_code":"TBR: third gender"}}]},{"name":"contact_phone_number","label":{"English":"Mobile phone number:","Roman Urdu":"Mobile phone number:"},"type":"text","bind":{"required":"yes","constraint":"regex(., '^03[0-9]{9}$')","jr:constraintMsg":{"English":"Phone number should be 11 digits in the following format: 03*********","Roman Urdu":"Phone number 11 hindason par mushtamil aur mundarja zail shakal main hona chahiey: 03*********"}},"instance":{"openmrs_entity_id":"Primary Contact Number","openmrs_entity":"person_attribute"}},{"name":"close_tb_contact","label":{"English":"Have you ever been in close contact with someone who was sick with TB?","Roman Urdu":"Kya aapke kissi kareebi dost ya rishtedaar ko TB howa hai?"},"type":"select one","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"TBR:tuberculosis contact","openmrs_entity":"concept"},"children":[{"name":"yes","label":{"English":"Yes","Roman Urdu":"Haan"},"instance":{"openmrs_code":"TBR:yes"}},{"name":"no","label":{"English":"No","Roman Urdu":"Nahi"},"instance":{"openmrs_code":"TBR:no"}},{"name":"dont_know","label":{"English":"Don't Know","Roman Urdu":"Pata Nahi"},"instance":{"openmrs_code":"TBR:unknown"}},{"name":"refuse","label":{"English":"Refuse","Roman Urdu":"Jawab nahi dena"},"instance":{"openmrs_code":"TBR:refused"}}]},{"name":"previous_tb_treatment","label":{"English":"Have you ever taken TB treatment for more than one month?","Roman Urdu":"Kya aapne kabhi TB ka ilaaj karwaya hai?"},"type":"select one","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"TBR:tuberculosis history","openmrs_entity":"concept"},"children":[{"name":"yes","label":{"English":"Yes","Roman Urdu":"Haan"},"instance":{"openmrs_code":"TBR:yes"}},{"name":"no","label":{"English":"No","Roman Urdu":"Nahi"},"instance":{"openmrs_code":"TBR:no"}},{"name":"dont_know","label":{"English":"Don't Know","Roman Urdu":"Pata Nahi"},"instance":{"openmrs_code":"TBR:unknown"}},{"name":"refuse","label":{"English":"Refuse","Roman Urdu":"Jawab nahi dena"},"instance":{"openmrs_code":"TBR:refused"}}]},{"name":"previous_tb_treatment_outcome","label":{"English":"If yes, what was the outcome of your previous TB treatment?","Roman Urdu":"Agar haan, tou uska nateja kya tha?"},"type":"select one","bind":{"required":"yes","relevant":"${previous_tb_treatment} = 'yes'"},"instance":{"openmrs_entity_id":"TBR:patient category","openmrs_entity":"concept"},"control":{"appearance":"minimal"},"children":[{"name":"cured","label":{"English":"Cured","Roman Urdu":"Sehatyaab"},"instance":{"openmrs_code":"TBR:cured"}},{"name":"defaulted","label":{"English":"Defaulted","Roman Urdu":"pehley se the shuda"},"instance":{"openmrs_code":"TBR:defaulted"}},{"name":"treatment_completed","label":{"English":"Treatment Completed","Roman Urdu":"Ilaaj mukammal ho gaya hay"},"instance":{"openmrs_code":"TBR:treatment complete"}},{"name":"transferred_out","label":{"English":"Transferred out","Roman Urdu":"ilaaj ke liye koi aur jagah ruju kiya"},"instance":{"openmrs_code":"TBR:transferred out"}},{"name":"still_on_treatment","label":{"English":"Still on treatment","Roman Urdu":"Zer-e-ilaj hain"},"instance":{"openmrs_code":"TBR:under treatment"}},{"name":"regimen_failure","label":{"English":"Regimen Failure","Roman Urdu":"ilaaj nakaam raha"},"instance":{"openmrs_code":"TBR:regimen failure"}},{"name":"other","label":{"English":"Other","Roman Urdu":"Koi aur"},"instance":{"openmrs_code":"TBR:other"}},{"name":"unknown","label":{"English":"Unknown","Roman Urdu":"Pata nahi"},"instance":{"openmrs_code":"TBR:unknown"}}]},{"name":"hiv_test","label":{"English":"Have you had an HIV test in the past?","Roman Urdu":"Kya aapne HIV ka test pishley 6 mahino mein karwaya hai?"},"type":"select one","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"TBR:hiv test","openmrs_entity":"concept"},"children":[{"name":"yes","label":{"English":"Yes","Roman Urdu":"Haan"},"instance":{"openmrs_code":"TBR:yes"}},{"name":"no","label":{"English":"No","Roman Urdu":"Nahi"},"instance":{"openmrs_code":"TBR:no"}},{"name":"dont_know","label":{"English":"Don't Know","Roman Urdu":"Pata Nahi"},"instance":{"openmrs_code":"TBR:unknown"}},{"name":"refuse","label":{"English":"Refuse","Roman Urdu":"Jawab nahi dena"},"instance":{"openmrs_code":"TBR:refused"}}]},{"name":"hiv_date","label":{"English":"If yes, date of test?","Roman Urdu":"Agar haan, test ki tareeq"},"type":"date","bind":{"required":"yes","relevant":"${hiv_test} = 'yes'"},"instance":{"openmrs_entity_id":"TBR: hiv test date","openmrs_entity":"concept"}},{"name":"hiv_results","label":{"English":"If yes, what is your HIV status?","Roman Urdu":"Test ka natija"},"type":"select one","bind":{"required":"yes","relevant":"${hiv_test} = 'yes'"},"instance":{"openmrs_entity_id":"TBR:hiv test result","openmrs_entity":"concept"},"control":{"appearance":"minimal"},"children":[{"name":"negative","label":{"English":"CT1","Roman Urdu":"Negative"},"instance":{"openmrs_code":"TBR:positive"}},{"name":"positive","label":{"English":"CT2","Roman Urdu":"Positive"},"instance":{"openmrs_code":"TBR:negative"}},{"name":"councelled","label":{"English":"C","Roman Urdu":"Indeterminate"},"instance":{"openmrs_code":"TBR:COUNCELLED"}},{"name":"Councelled and Tested","label":{"English":"CT","Roman Urdu":"Pata Nahi"},"instance":{"openmrs_code":"TBR:COUNCELLED AND TESTED"}}]},{"name":"parish","label":{"English":"Parish","Roman Urdu":"Suba"},"type":"text","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"parish","openmrs_entity":"person_address","openmrs_entity_parent":"usual_residence"},"control":{"appearance":"minimal"}},{"name":"city_village","label":{"English":"Village","Roman Urdu":"Shehr"},"type":"text","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"cityVillage","openmrs_entity":"person_address","openmrs_entity_parent":"usual_residence"},"control":{"appearance":"minimal"},"choice_filter":"parish=${parish} or parish='na'"},{"name":"sub_county","label":{"English":"Sub-County","Roman Urdu":"sub_county / Qasbah / Basti"},"type":"text","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"subCounty","openmrs_entity":"person_address","openmrs_entity_parent":"usual_residence"},"control":{"appearance":"minimal"},"choice_filter":"(parish=${parish} and city=${village} ) or city='na'"},{"name":"district","label":{"English":"District","Roman Urdu":"Union Council"},"type":"text","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"district","openmrs_entity":"person_address","openmrs_entity_parent":"usual_residence"},"control":{"appearance":"minimal"},"choice_filter":"(parish=${parish} and city=${village} and district=${district}) or district='na'"},{"name":"address1","label":{"English":"Home Address","Roman Urdu":"Ghar ka pata"},"type":"text","bind":{"required":"yes"},"instance":{"openmrs_entity_id":"address1","openmrs_entity":"person_address","openmrs_entity_parent":"usual_residence"}},{"name":"full_address","label":{"English":"Full address: ${address1}, ${district}, ${sub_county}. ${city_village}. ${parish}","Roman Urdu":"Poora Pata: ${address1}, ${district}, ${sub_county}. ${city_village}. ${parish}"},"type":"note","bind":{"calculate":"jr:choice-name(${parish}, '${parish}')"},"instance":{"openmrs_entity_id":"TBR:full address text","openmrs_entity":"concept"}},{"name":"comments","label":{"English":"Comments","Roman Urdu":"Tabsarah"},"type":"text","instance":{"openmrs_entity_id":"TBR:additional notes","openmrs_entity":"concept"},"control":{"appearance":"multiline"}},{"name":"meta","type":"group","control":{"bodyless":true},"children":[{"name":"instanceID","type":"calculate","bind":{"readonly":"true()","calculate":"concat('uuid:', uuid())"}}]}]}